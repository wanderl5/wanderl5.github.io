(window.webpackJsonp=window.webpackJsonp||[]).push([[363],{794:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("ul",[a("li",[s._v("本文主要讲述在windows系统中使用cmake编译程序")])]),s._v(" "),a("h2",{attrs:{id:"源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码"}},[s._v("#")]),s._v(" 源码")]),s._v(" "),a("h3",{attrs:{id:"底层src"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#底层src"}},[s._v("#")]),s._v(" 底层src")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGET_NAME "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app_hello1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nproject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TARGET_NAME}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OUT_PATH "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PROJECT_SOURCE_DIR}")]),s._v('/../../bin/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\naux_source_directory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("./ DIR_SRCS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_PATH}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TARGET_NAME}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DIR_SRCS}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#create exe file")]),s._v("\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_RUNTIME_OUTPUT_DIRECTORY "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${OUT_PATH}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nadd_executable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${TARGET_NAME}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DIR_SRCS}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"组织src"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组织src"}},[s._v("#")]),s._v(" 组织src")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake_minimum_required"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("VERSION "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#create a project")]),s._v("\nproject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nadd_subdirectory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app_hello1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"总的cmakelists-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总的cmakelists-txt"}},[s._v("#")]),s._v(" 总的CMakeLists.txt")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake_minimum_required"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("VERSION "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ncmake_policy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("VERSION "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".3.27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n// create a project\nproject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_INSTALL_PREFIX "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_SOURCE_DIR}")]),s._v("/MyInstallPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_STANDARD "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_STANDARD_REQUIRED ON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_EXTENSIONS OFF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n// 设置静态链接的多线程运行时库\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_CXX_FLAGS}")]),s._v(' /MT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_C_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_C_FLAGS}")]),s._v(' /MT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n// 忽略指定lib\nset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_EXE_LINKER_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/NODEFAULTLIB:my.lib /NODEFAULTLIB:my1.lib"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n// 编译器设置标志\nSET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_FLAGS_RELEASE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_CXX_FLAGS_RELEASE}")]),s._v(' /GL"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
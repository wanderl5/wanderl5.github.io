(window.webpackJsonp=window.webpackJsonp||[]).push([[495],{965:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"rsync概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rsync概述"}},[s._v("#")]),s._v(" rsync概述")]),s._v(" "),a("ul",[a("li",[s._v("文件/文件夹同步工具,支持本地或远程")]),s._v(" "),a("li")]),s._v(" "),a("h2",{attrs:{id:"install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[s._v("#")]),s._v(" install")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("h3",{attrs:{id:"a递归同步-含子文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a递归同步-含子文件夹"}},[s._v("#")]),s._v(" "),a("code",[s._v("-a")]),s._v("递归同步(含子文件夹)")]),s._v(" "),a("ul",[a("li",[s._v("可使用"),a("code",[s._v("-a")]),s._v("或"),a("code",[s._v("-r")]),s._v("，但建议使用"),a("code",[s._v("-a")])])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("-a")]),s._v("参数除了可以递归同步以外，还可以同步元信息（比如修改时间、权限等）。由于 rsync 默认使用文件大小和修改时间决定文件是否需要更新，所以-a比-r更有用")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" destination\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"v支持执行结果同步显示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v支持执行结果同步显示"}},[s._v("#")]),s._v(" "),a("code",[s._v("-v")]),s._v("支持执行结果同步显示")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" destination\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"n或-dry-run模拟执行结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#n或-dry-run模拟执行结果"}},[s._v("#")]),s._v(" "),a("code",[s._v("-n")]),s._v("或"),a("code",[s._v("--dry-run")]),s._v("模拟执行结果")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-anv")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" destination\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("尝试更新，仅打印可能的更新结果，不会实际更新")])]),s._v(" "),a("h3",{attrs:{id:"delete-参数同步删除远端不一致的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-参数同步删除远端不一致的内容"}},[s._v("#")]),s._v(" "),a("code",[s._v("--delete")]),s._v(" 参数同步删除远端不一致的内容")]),s._v(" "),a("ul",[a("li",[s._v("默认情况下，rsync 只确保源目录的所有内容（明确排除的文件除外）都复制到目标目录。它不会使两个目录保持相同，并且不会删除文件。")]),s._v(" "),a("li",[s._v("如果要使得目标目录成为源目录的镜像副本，则必须使用--delete参数，这将删除只存在于目标目录、不存在于源目录的文件。")])]),s._v(" "),a("p",[s._v("$ rsync -av --exclude 'file1.txt' --exclude 'dir1/*' source/ destination")]),s._v(" "),a("h3",{attrs:{id:"exclude-和-include参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exclude-和-include参数"}},[s._v("#")]),s._v(" "),a("code",[s._v("--exclude")]),s._v(" 和"),a("code",[s._v("--include")]),s._v("参数")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file1.txt'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dir1/*'")]),s._v(" source/ destination\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file1.txt'")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dir1/*'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  source/ destination\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件中写排除格式")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exclude *.swp'")]),s._v(" source/ destination\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包含所有txt，排除其他任意")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'+ *.txt'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'- *'")]),s._v(" source/ destination\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 排除除txt外的所有文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.txt"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*'")]),s._v(" source/ destination\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"远程同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程同步"}},[s._v("#")]),s._v(" 远程同步")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地同步到远程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" source/ username@192.168.193.111:/home/cy/dest\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 远程同步到本地")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-av")]),s._v(" username@remote_host:source/ destination\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("ul",[a("li",[s._v("注意文件夹同步必须带上末尾的“/”")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);
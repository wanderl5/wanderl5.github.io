(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{548:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Valgrind")]),s._v("是功能类似asan;")]),s._v(" "),a("li",[s._v("缺点:\n"),a("ul",[a("li",[s._v("展示出的内容不够友好,多线程场景有排查不出的情况;")]),s._v(" "),a("li",[s._v("排查sgev的问题不直观")]),s._v(" "),a("li",[s._v("运行速度会降低")])])]),s._v(" "),a("li",[s._v("优点:\n"),a("ul",[a("li",[s._v("任何使用"),a("code",[s._v("-g")]),s._v("编译的程序,拿来就可以检测,使用valgrind命令挂载运行即可")]),s._v(" "),a("li",[s._v("无gcc版本要求\n"),a("ul",[a("li",[s._v("无需重新编译,且库的泄漏也能检查到")])])])])]),s._v(" "),a("li",[s._v("core文件会产生")]),s._v(" "),a("li",[s._v("不能挂载使用asan编译的文件;")])]),s._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("ul",[a("li",[s._v("编译选项不用调整,直接挂载运行")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出到xml中")]),s._v("\nvalgrind "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("memcheck "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--xml")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes --xml-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./valgrind_output.xml --gen-suppressions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("all --leak-check"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full --leak-resolution"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("med --track-origins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--vgdb")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/bin/dpuiInterface dpuiInterfaceLME "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12300")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("➜  cbuild git:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ✗ valgrind "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("memcheck "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--xml")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes --xml-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./valgrind_output.xml --gen-suppressions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("all --leak-check"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full --leak-resolution"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("med --track-origins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--vgdb")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/bin/dpuiInterface dpuiInterfaceLME "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12300")]),s._v("\nVersion 01.00.01 \n09:41:06 Startup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n09:41:06 Create WorkThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" OK\n09:41:06 Create WorkThread2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" OK\nMain---amqpRealClient begin connect mq "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nbegin to create dpui\n_OnNotifyMsg\ncode:000000000000000000485650\nDPUI DoMsg.MsgType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  If you believe this happened as a result of a stack\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  overflow "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your program's main thread "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("unlikely but\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  possible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", you can try to increase the size of the\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  main thread stack using the --main-stacksize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" flag.\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  The main thread stack size used "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" this run was "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12365")]),s._v(" segmentation fault  valgrind "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("memcheck "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--xml")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes --xml-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./valgrind_output.xml   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("主要检查"),a("code",[s._v("definite lost")]),s._v("的内容,并且block多于一次;")])]),s._v(" "),a("h2",{attrs:{id:"误报文件的抑制suppression"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#误报文件的抑制suppression"}},[s._v("#")]),s._v(" 误报文件的抑制suppression")]),s._v(" "),a("h3",{attrs:{id:"将检测结果都存入文件-包括错误信息和suppression"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将检测结果都存入文件-包括错误信息和suppression"}},[s._v("#")]),s._v(" 将检测结果都存入文件,包括错误信息和suppression")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("valgrind "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("memcheck --leak-check"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full --error-limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no --gen-suppressions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("all --log-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("minimalraw.log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/bin/dpuiInterface dpuiInterfaceLME "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12300")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"加工日志-minimalraw-log-仅保留suppression"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加工日志-minimalraw-log-仅保留suppression"}},[s._v("#")]),s._v(' 加工日志"minimalraw.log",仅保留suppression')]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("288")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" blocks are possibly lost "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" loss record "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("124")]),s._v(" of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("145")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    at 0x48455EF: calloc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vg_replace_malloc.c:1328"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x4010AE2: calloc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rtld-malloc.h:44"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x4010AE2: allocate_dtv "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dl-tls.c:375"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x40114DD: _dl_allocate_tls "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dl-tls.c:634"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x75F1CEE: allocate_stack "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("allocatestack.c:423"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x75F1CEE: pthread_create@@GLIBC_2.34 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pthread_create.c:650"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x16105D: xnet::TThread::Execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("void* "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("void*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", void*, int, bool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xthread.cpp:57"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x159B2D: lang::TTimer::Active"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Timer.cpp:48"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x128E43: TDpuiHandle::TDpuiHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dpuiHandle.cpp:194"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    by 0x12D121: main "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dpuiInterface.cpp:236"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("insert_a_suppression_name_here"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   Memcheck:Leak\n   match-leak-kinds: possible\n   fun:calloc\n   fun:calloc\n   fun:allocate_dtv\n   fun:_dl_allocate_tls\n   fun:allocate_stack\n   fun:pthread_create@@GLIBC_2.34\n   fun:_ZN4xnet7TThread7ExecuteEPFPvS1_ES1_ib\n   fun:_ZN4lang6TTimer6ActiveEv\n   fun:_ZN11TDpuiHandleC1Ev\n   fun:main\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("288")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" blocks are possibly lost "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" loss record "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("125")]),s._v(" of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("145")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981166")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    at 0x48455EF: calloc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vg_replace_malloc.c:1328"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" minimalraw.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"=="')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/dpui.supp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"最终的suppression文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最终的suppression文件"}},[s._v("#")]),s._v(" 最终的suppression文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("insert_a_suppression_name_here"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   Memcheck:Leak\n   match-leak-kinds: possible\n   fun:calloc\n   fun:calloc\n   fun:allocate_dtv\n   fun:_dl_allocate_tls\n   fun:allocate_stack\n   fun:pthread_create@@GLIBC_2.34\n   fun:_ZN4xnet7TThread7ExecuteEPFPvS1_ES1_ib\n   fun:_ZN4lang6TTimer6ActiveEv\n   fun:_ZN11TDpuiHandleC1Ev\n   fun:main\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("insert_a_suppression_name_here"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   Memcheck:Leak\n   match-leak-kinds: possible\n   fun:calloc\n   fun:calloc\n   fun:allocate_dtv\n   fun:_dl_allocate_tls\n   fun:allocate_stack\n   fun:pthread_create@@GLIBC_2.34\n   fun:_ZN4xnet7TThread7ExecuteEPFPvS1_ES1_ib\n   fun:_ZN4lang8TBackLogC1EPKcS2_b\n   fun:_ZN4lang8TBackLog9NewObjectEPKcS2_\n   fun:_ZN15TDpuiWorkThreadC1Ei\n   fun:_ZN11TDpuiHandleC1Ev\n   fun:main\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("h3",{attrs:{id:"再次检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#再次检查"}},[s._v("#")]),s._v(" 再次检查")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("valgrind --log-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"valgrind_1.log"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("memcheck --leak-check"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--suppressions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/dpui.supp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/bin/dpuiInterface dpuiInterfaceLME "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12300")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("已经没有"),a("code",[s._v("possible leak")]),s._v(",且均在suppressed中了")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" LEAK SUMMARY:\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    definitely lost: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" blocks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    indirectly lost: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" blocks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("      possibly lost: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" blocks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("    still reachable: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,880")]),s._v(",162 bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("156")]),s._v(" blocks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("         suppressed: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,304")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" blocks\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" Reachable blocks "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("those to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" a pointer was found"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" are not shown.\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" To see them, rerun with: --leak-check"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full --show-leak-kinds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("all\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" For lists of detected and suppressed errors, rerun with: "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" ERROR SUMMARY: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" errors from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" contexts "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("suppressed: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"停止valgrind产生报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止valgrind产生报告"}},[s._v("#")]),s._v(" 停止valgrind产生报告")]),s._v(" "),a("h3",{attrs:{id:"未捕获信号的程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#未捕获信号的程序"}},[s._v("#")]),s._v(" 未捕获信号的程序")]),s._v(" "),a("ul",[a("li",[s._v("直接使用"),a("code",[s._v("ctrl+c")]),s._v("停止即可")])]),s._v(" "),a("h3",{attrs:{id:"捕获了信号的后台程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#捕获了信号的后台程序"}},[s._v("#")]),s._v(" 捕获了信号的后台程序")]),s._v(" "),a("ul",[a("li",[s._v("使用命令终止")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("981780")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
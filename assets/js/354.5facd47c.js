(window.webpackJsonp=window.webpackJsonp||[]).push([[354],{783:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mac上使用gdb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac上使用gdb"}},[s._v("#")]),s._v(" mac上使用gdb")]),s._v(" "),t("h2",{attrs:{id:"创建钥匙串"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建钥匙串"}},[s._v("#")]),s._v(" 创建钥匙串")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不创建会出现如下提示")]),s._v("\nUnable to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" Mach task port "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" process-id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("358")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("os/kern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failure "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("please check gdb is codesigned - see taskgated"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("打开应用程序>其他>钥匙串访问")]),s._v(" "),t("li",[s._v("在菜单栏中选择证书助理>创建证书")]),s._v(" "),t("li",[s._v("名称随便填(比如说gdb_cert), 身份类型为「自签名根证书」，证书类型为「代码签名 codesign」，并勾选「让我覆盖这些默认值」")]),s._v(" "),t("li",[s._v("一路继续，直到让我们指定用于该证书的位置，选择「系统」。然后输入密码即可创建;")]),s._v(" "),t("li",[s._v("在「系统」钥匙串的「我的证书」种类中找到证书，双击打开，在「信任」中，将「使用此证书时」选择为「始终信任」，关闭钥匙串应用,此时会再次要求输入密码保存。")])]),s._v(" "),t("blockquote",[t("p",[s._v('注意: 创建系统串有概率失败,若失败,则先用login串创建,然后再"我的证书MyCertification"中选择login类型的证书导出,再System串中重新导入即可')])]),s._v(" "),t("ul",[t("li",[s._v("新建一个叫做gdb-entitlement.xml的文件，其内容为：")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token doctype"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<!")]),t("span",{pre:!0,attrs:{class:"token doctype-tag"}},[s._v("DOCTYPE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token name"}},[s._v("plist")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token name"}},[s._v("PUBLIC")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-//Apple//DTD PLIST 1.0//EN"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.apple.com/DTDs/PropertyList-1.0.dtd"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("plist")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("1.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dict")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.apple.security.cs.debugger"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dict")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("plist")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("在终端键入绑定证书")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("codesign "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--entitlements")]),s._v(" gdb-entitlement.xml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fs")]),s._v(" gdb_cert /usr/loacl/bin/gdb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("在~/.gdbinit中加入:")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" startup-with-shell off\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("通过以上配置,即可实现在mac进行gdb正常调试了")])])}),[],!1,null,null,null);t.default=e.exports}}]);
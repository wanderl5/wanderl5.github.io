(window.webpackJsonp=window.webpackJsonp||[]).push([[353],{782:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"gdb详细描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gdb详细描述"}},[s._v("#")]),s._v(" GDB详细描述")]),s._v(" "),a("blockquote",[a("p",[s._v("GDB是符号式调试器，必须通过-g选项，在程序编译时将源代码到机器指令的信息写入到可执行文件的符号表中。在包含多个源代码文件的大型程序中，必须在编译每个模块的时候都使用-g选项。\n另外，编译条件可以考虑加上-O0优化")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/62511444",target:"_blank",rel:"noopener noreferrer"}},[s._v("GDB调试指南-源码查看"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"启用gdb调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启用gdb调试"}},[s._v("#")]),s._v(" 启用gdb调试")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$gcc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" main.c "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" main "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g 表示编译支持 gdb 调试, 并且不能带上-O 或者 -O2 优化")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$gdb")]),s._v(" main              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调试 cky 程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$gdb")]),s._v(" main core         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带上 core 文件一起调试，程序非法执行后 core dump 后产生 core 文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$gdb")]),s._v(" main "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("PID"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个服务程序运行时的进程ID。gdb会自动attach上去，并调试他")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$gdb")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tui")]),s._v(" main        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在终端窗口上部显示一个源代码查看窗 (emacs)")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"列出源文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#列出源文件"}},[s._v("#")]),s._v(" 列出源文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("set listsize "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 l 命令显示源码的行数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("l "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,100")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出1-100行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("l file:N          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定文件的第 N 行代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("l func            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示特定函数源代码")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"运行程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行程序"}},[s._v("#")]),s._v(" 运行程序")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("r "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价于 main -a -b")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("start             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新执行程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("kill              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("quit              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出GDB")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置启动参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" args frfserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12390")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"断点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#断点"}},[s._v("#")]),s._v(" 断点")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("i b                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前所有断点信息，以及它们的编号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将下一行设置为断点，循环、递归时很有用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 17行打个断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b func              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# func 函数处打个断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 条件中断，在12行处，当 i = 9 时中断")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b temp:10           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在temp.c中第10行 设置断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b temp:func         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在temp.c中func函数处 打个断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("tb func             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tb 是临时断点，即用完后就会自动删除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b *0x400540         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在地址 0x400540 处设置断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 1 号断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Enter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# d + 回车 清除所有断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("disable "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用断点，还可以禁用范围 disable 1-3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("enable "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用断点, 还可以启用范围 enable 1-3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("condition "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改4号中断的条件为: a = 40 时中断")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"断点调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#断点调试"}},[s._v("#")]),s._v(" 断点调试")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" n                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单步执行,不跟踪到函数内部,Step Over")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" s                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单步执行,追踪到函数内部,Step In")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" s "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 单步执行 4 条指令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" finish              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行到当前函数返回,Step Out,可简写为`fin`")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" value        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不继续执行函数中的语句，而是直接让函数返回 value")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 继续执行，直到当前循环结束")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 程序继续运行, 直到下一个断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Enter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接回车表示，重复执行上一次命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" call func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12,32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接在调试时调用函数")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"观察点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#观察点"}},[s._v("#")]),s._v(" 观察点")]),s._v(" "),a("ul",[a("li",[s._v("观察点 watchpoint 用于监视变量的读写操作。观察点可以设置在表达式上。观察点类似于断点，但没有绑定到指定代码行。")]),s._v(" "),a("li",[s._v('观察点最常见的用途是观察程序 "何时" 会修改某个变量。当一个被观察的变量的值改变时，GDB会暂停程序，并显示变量的旧值和新值，以及下一行要执行的代码。')]),s._v(" "),a("li",[s._v("设置局部变量的观察点之前，必须先执行程序，直到程序流进入该变量的作用域才行。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" expression   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当表达式的值改变时，GDB暂停程序的运行 - 硬断点")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" rwatch expression  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当程序读取 此表达式的 值时，GDB暂停程序的运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" awatch expression  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当程序读取或修改 和此表达式相关 的任何对象时")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当 i = 99 时，程序暂停运行")]),s._v("\n\neg.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先在要设置观察点的局部区域内打一个断点")]),s._v("\nBreakpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" at 0x735: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" hello.c, line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" r                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行程序")]),s._v("\nStarting program: /home/cky/workspace/C/gdb/hello\nBreakpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", main "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("argv")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x7fffffffe008"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at hello.c:12\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("        int *iPtr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" a            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置观察点")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 继续执行代码，直到观察点的变量发生改变")]),s._v("\nContinuing.\nHardware watchpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": a\nOld value "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nNew value "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4097")]),s._v("\nmain "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("argv")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x7fffffffe008"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at hello.c:14\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("        puts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is the statement following ++ *iPtr."')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" rwatch b           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置读观察点")]),s._v("\nHardware "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" watchpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": b\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i b                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看下断点、观察点设置情况")]),s._v("\nNum     Type            Disp Enb Address            What\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       breakpoint      keep y   0x0000555555554735 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" main at hello.c:11\n    breakpoint already hit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       hw watchpoint   keep y                      a\n    breakpoint already hit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" watchpoint keep y                      b\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 继续执行代码，直到读观察点变量被读取时，程序停止执行")]),s._v("\nContinuing.\nThis is the statement following ++ *iPtr.\nHardware "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" watchpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": b\nValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v("\n0x0000555555554761 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" main "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("argv")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x7fffffffe008"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at hello.c:15\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("        printf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a = %d; b = %d.'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(", a, b "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br")])]),a("h2",{attrs:{id:"汇编"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#汇编"}},[s._v("#")]),s._v(" 汇编")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" disas                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前函数 汇编代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" disas func                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 func 汇编代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" disas 0x400544            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 地址 0x400544 处汇编")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" disas 0x400540,0x40054d   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看汇编指定地址范围内的代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p /x "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rip")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看程序计数器的值")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"查看堆栈信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看堆栈信息"}},[s._v("#")]),s._v(" 查看堆栈信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bt                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看函数调用堆栈列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i s                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" f                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前所在堆栈，还可显示当前执行代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i f                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前所在堆栈的 详细信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到 #1 号栈下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i locals           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印当前栈下，所有的局部变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i args             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印当前栈下，函数传入的参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i reg              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前栈下，所有寄存器变量的值")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"查看程序变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看程序变量"}},[s._v("#")]),s._v(" 查看程序变量")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p /x "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rax")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 rax 寄存器(十六进制)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p /x "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rax")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 rax 寄存器(二进制)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p /x "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rsp")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 rsp寄存器值 + 8 后的值")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p var                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印变量的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p arr                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印静态数组的值 $3 = {190, 0, 0, 0, 90, 0, 0, 76}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p *array@4           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印动态数组的 4 个元素")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("var                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印变量的地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("long *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("0x7fffffffe818         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印地址处的长整型值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("long *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$rsp")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出($rsp + 8)地址处的长整型值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设定入参，对程序中函数进行调用，看函数返回什么")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'f2.c'")]),s._v("::x                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看f2.c文件中全局变量x的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'f2.c'")]),s._v("::sum::x                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看f2.c中sum函数中x的值")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" variable a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接修改程序里变量的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" whatis a             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示变量的数据类型")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"自动显示变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动显示变量"}},[s._v("#")]),s._v(" 自动显示变量")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" display "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跟踪显示 sum 变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1747168440")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" display input      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跟踪显示 input 变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": input "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" n                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每次程序执行后停下来，都会输出监视的变量的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" + input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1868769330")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": input "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" undisplay "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消对跟踪号为 2 (input)的变量的跟踪显示")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"修改变量的值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改变量的值"}},[s._v("#")]),s._v(" 修改变量的值")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i locals\ni "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" var "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接修改程序里当前栈下的变量的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i locals\ni "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者直接让 p 执行表达式来改变程序里变量的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p printf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"result[2]=%d"')]),s._v(",result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# p 命令直接执行表达式")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"设置gdb变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置gdb变量"}},[s._v("#")]),s._v(" 设置gdb变量")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("set "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("p my_print"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v("++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$37")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'e'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("回车\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$38")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'l'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("回车\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$39")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'o'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"查看内存数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看内存数据"}},[s._v("#")]),s._v(" 查看内存数据")]),s._v(" "),a("p",[s._v("x命令输出的每一行首先都是内存的起始地址，后面是取符号表的对应变量名称。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("汇编级别的单步调试，对于分析指针和寻址非常有用。\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" disassembly-flavor intel          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置反汇编格式为 intel汇编")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" disass main                           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 反汇编 main 函数")]),s._v("\nDump of assembler code "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" main:\n   0x00005555555546a4 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(":    push   rbp\n   0x00005555555546a5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(":    mov    rbp,rsp\n   0x00005555555546a8 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v(">")]),s._v(":    sub    rsp,0x20\n   0x00005555555546ac "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("8")]),s._v(">")]),s._v(":    mov    DWORD PTR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rbp-0x14"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",edi\n   0x00005555555546af "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+1"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(":    mov    QWORD PTR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rbp-0x20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",rsi\n   0x00005555555546b3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("+1"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("5")]),s._v(">")]),s._v(":    mov    DWORD PTR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rbp-0xc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",0x1000\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nEnd of assembler dump.\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b *0x00005555555546c9             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在指定地址处打断点")]),s._v("\nBreakpoint "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" at 0x5555555546c9: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" hello.c, line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(".\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" si                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 汇编级单步执行")]),s._v("\n0x00005555555546d6    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("        printf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%d'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(", c "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ni                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 汇编级单步执行")]),s._v("\n0x00005555555546d8    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("        printf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%d'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(", c "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h2",{attrs:{id:"查看进程信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看进程信息"}},[s._v("#")]),s._v(" 查看进程信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i proc status                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程一般信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i proc "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上，不同展示面板")]),s._v("\nprocess "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19832")]),s._v("\nProcess: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19832")]),s._v("\nExec file: hello\nState: t\nParent process: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18319")]),s._v("\nProcess group: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19832")]),s._v("\nSession id: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13458")]),s._v("\nTTY: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34816")]),s._v("\nTTY owner process group: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18319")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i proc mappings               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程的内存映射信息")]),s._v("\nprocess "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19832")]),s._v("\nMapped address spaces:\n\n          Start Addr           End Addr       Size     Offset objfile\n      0x555555554000     0x555555555000     0x1000        0x0 /home/cky/workspace/C/gdb/hello\n      0x555555754000     0x555555755000     0x1000        0x0 /home/cky/workspace/C/gdb/hello\n      0x555555755000     0x555555756000     0x1000     0x1000 /home/cky/workspace/C/gdb/hello\n      0x7ffff79e4000     0x7ffff7bcb000   0x1e7000        0x0 /lib/x86_64-linux-gnu/libc-2.27.so\n      0x7ffff7bcb000     0x7ffff7dcb000   0x200000   0x1e7000 /lib/x86_64-linux-gnu/libc-2.27.so\n      0x7ffff7dcb000     0x7ffff7dcf000     0x4000   0x1e7000 /lib/x86_64-linux-gnu/libc-2.27.so\n      0x7ffff7dcf000     0x7ffff7dd1000     0x2000   0x1eb000 /lib/x86_64-linux-gnu/libc-2.27.so\n      0x7ffff7dd1000     0x7ffff7dd5000     0x4000        0x0\n      0x7ffff7dd5000     0x7ffff7dfc000    0x27000        0x0 /lib/x86_64-linux-gnu/ld-2.27.so\n      0x7ffff7feb000     0x7ffff7fed000     0x2000        0x0\n      0x7ffff7ff7000     0x7ffff7ffa000     0x3000        0x0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("vvar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h2",{attrs:{id:"线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线程"}},[s._v("#")]),s._v(" 线程")]),s._v(" "),a("p",[s._v("可以在 pthread_create 处设置断点，当线程创建时会生成提示信息。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c\nContinuing.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("New Thread 0xb7e78b70 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LWP "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2933")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" i threads         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有线程列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示当前线程调用堆栈")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" thread "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换线程")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"调试多进程-gdb-v7-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试多进程-gdb-v7-0"}},[s._v("#")]),s._v(" 调试多进程 ( GDB > V7.0 )")]),s._v(" "),a("p",[s._v("follow-fork-mode\tdetach-on-fork\t说明\nparent\t            on\t            只调试主进程 GDB默认\nchild\t            on\t            只调试子进程\nparent\t            off\t            同时调试两个进程，gdb跟主进程，子进程停在fork位置\nchild\t            off\t            同时调试两个进程，gdb跟子进程，主进程停在fork位置")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("set follow-fork-mode child\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("set detach-on-fork off\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("info inferiors        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询正在调试的进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("inferior Num          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换进程")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"传递信号给调试程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传递信号给调试程序"}},[s._v("#")]),s._v(" 传递信号给调试程序")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE nostop  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SIGPIPE 信号不发送给调试程序，也不停止调试程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE stop    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 接收到 SIGPIPE 信号时，停止程序的执行，并且显示一条已接收到信号的消息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE print   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置接收到信号时，显示一条消息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE noprint "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 和上一条相反")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE pass    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将信号发送给程序，运行调试程序对信号进行处理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE nopass  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不发送信号给调试程序，并且停止调试程序运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("handle SIGPIPE stop print "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例子")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("signal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送信号给调试程序命令")]),s._v("\ncontinuing with signal SIGINT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"强制函数操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制函数操作"}},[s._v("#")]),s._v(" 强制函数操作")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("call func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arg1,arg2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("return "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("54321")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让sum函数立即返回 54321")]),s._v("\nMake "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y or n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"绑定已经运行的进程-attach"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#绑定已经运行的进程-attach"}},[s._v("#")]),s._v(" 绑定已经运行的进程 attach")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("-05 git:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ✗ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gdb main "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29955")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用了管理员权限才执行成功的，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" cky 的密码：\nType "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apropos word"')]),s._v(" to search "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" commands related to "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"word"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nReading symbols from main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".done.\nAttaching to program: /home/cky/workspace/C/2018-05/main, process "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29955")]),s._v("\nReading symbols from /lib/x86_64-linux-gnu/libc.so.6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".done\nReading symbols from /usr/lib/debug//lib/x86_64-linux-gnu/libc-2.23.so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".done.\n\nReading symbols from /lib64/ld-linux-x86-64.so.2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".done.\nReading symbols from /usr/lib/debug//lib/x86_64-linux-gnu/ld-2.23.so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".done.\n0x00007f6eb14342f0 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" __nanosleep_nocancel "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/sysdeps/unix/syscall-template.S:84\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/sysdeps/unix/syscall-template.S: 没有那个文件或目录.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0  0x00007f6eb14342f0 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:84")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1  0x00007f6eb143425a in __sleep (seconds=0) at ../sysdeps/posix/sleep.c:55")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2  0x00000000004006ff in main (ac=1, av=0x7ffd2c4a9728) at main.c:66")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0  0x00007f6eb14342f0 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:84")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1  0x00007f6eb143425a in __sleep (seconds=0) at ../sysdeps/posix/sleep.c:55")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2  0x00000000004006ff in main (ac=1, av=0x7ffd2c4a9728) at main.c:66")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2  0x00000000004006ff in main (ac=1, av=0x7ffd2c4a9728) at main.c:66")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66")]),s._v("            sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" p i\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("detach "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 离开进程，进而让进程继续执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("kill   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止这个进程")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("h2",{attrs:{id:"调试器查看自身状态信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试器查看自身状态信息"}},[s._v("#")]),s._v(" 调试器查看自身状态信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" show             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 show 命令支持显示的内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" show logging          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 gdb 日志情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" logging on        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启 gdb 调试日志")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"gdb-初始化文件-gdbinit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gdb-初始化文件-gdbinit"}},[s._v("#")]),s._v(" gdb 初始化文件 .gdbinit")]),s._v(" "),a("ul",[a("li",[s._v("放在 /home/用户1/.gdbinit, 该用户调用 gdb 时自动执行 .gdbinit 文件")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" charset UTF-8\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存历史命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" filename ./.gdb_history\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" save on\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录执行gdb的过程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" logging "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" ./.log.txt\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" logging on\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出时不显示提示信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" confirm off\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印数组的索引下标")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" print array-indexes on\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每行打印一个结构体成员")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" print pretty on\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义命令 qdp : 退出并保留断点")]),s._v("\ndefine qbp\nsave breakpoints ./.gdb_bp\nquit\nend\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义命令 ldp : 加载历史工作断点")]),s._v("\ndefine lbp\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ./.gdb_bp\nend\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[374],{809:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"恢复本地工作区文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#恢复本地工作区文件"}},[s._v("#")]),s._v(" 恢复本地工作区文件")]),s._v(" "),t("ul",[t("li",[s._v("一般在使用svn时,如果觉得文件被搞乱了,可以删除整个文件夹再重新update,但在git下,重新fetch,pull都无法实现类似功能")]),s._v(" "),t("li",[s._v("建议使用restore实现类似功能")])]),s._v(" "),t("h3",{attrs:{id:"意外删除了本地文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#意外删除了本地文件"}},[s._v("#")]),s._v(" 意外删除了本地文件")]),s._v(" "),t("ul",[t("li",[s._v("已add到暂存区")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复单个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" restore "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复当前文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" restore "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("注意: 千万不要使用"),t("code",[s._v("git restore --stage 2.txt")]),s._v("来恢复,这样会导致2.txt直接从暂存区也删除,本地文件还是删除状态")])]),s._v(" "),t("ul",[t("li",[s._v("已提交,则从commit恢复本地文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复单个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" restore "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s71234fb")]),s._v(" tt/1.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("涉及多次提交,很多文件需要回退,且未推送到远端仓库,可以考虑使用"),t("code",[s._v("reset")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset 71234fb "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("若已推送到远端,此操作会带来后续合并,强制推送等情况,不建议采用")])]),s._v(" "),t("h3",{attrs:{id:"从其他分支恢复本地文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从其他分支恢复本地文件"}},[s._v("#")]),s._v(" 从其他分支恢复本地文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从分支恢复单个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" restore "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sf1")]),s._v(" tt/1.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("建议在restore文件前,将stage内容都先清理掉,一般可以先stash保存下;")])]),s._v(" "),t("h2",{attrs:{id:"暂存区取出到工作区-撤销stage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#暂存区取出到工作区-撤销stage"}},[s._v("#")]),s._v(" 暂存区取出到工作区(撤销stage)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建议使用此命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有本地文本被")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" restore "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("--stage")]),s._v("等同于"),t("code",[s._v("-S")]),s._v(",仅恢复暂存区,  指定"),t("code",[s._v("-W")]),s._v(",则仅恢复工作区\n使用"),t("code",[s._v("reset")]),s._v("和"),t("code",[s._v("restore")]),s._v("在此文本被部分stage时,效果上会有差异:\n- 使用reset会保留本地文本,丢弃部分暂存的文本\n- 使用restore则会使用暂存的文本替换本地内容")])]),s._v(" "),t("h2",{attrs:{id:"取消已提交的commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#取消已提交的commit"}},[s._v("#")]),s._v(" 取消已提交的commit")]),s._v(" "),t("ul",[t("li",[s._v("使用"),t("code",[s._v("git revert")]),s._v(",产生反向操作")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" revert 470c1b8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"git-历史日志里消失了还希望恢复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-历史日志里消失了还希望恢复"}},[s._v("#")]),s._v(" git 历史日志里消失了还希望恢复")]),s._v(" "),t("ul",[t("li",[s._v("通常有以下场景可能需要恢复\n"),t("ul",[t("li",[s._v("reset后发现误操作了")]),s._v(" "),t("li",[s._v("amend后反悔了")])])]),s._v(" "),t("li",[s._v("恢复的手段:\n"),t("ul",[t("li",[s._v("通过reflog找到commit ID进行恢复")]),s._v(" "),t("li",[s._v("通过"),t("code",[s._v("git fsck")]),s._v("找到dangling 对象进行恢复")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("reflog记录HEAD指针的移动位置,一般保存30天左右")])])])}),[],!1,null,null,null);t.default=r.exports}}]);
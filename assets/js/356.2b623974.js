(window.webpackJsonp=window.webpackJsonp||[]).push([[356],{786:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"启动-停止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-停止"}},[t._v("#")]),t._v(" 启动/停止")]),t._v(" "),s("h3",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("run/r")]),t._v(" "),s("td",[t._v("启动直到第一个断点")])]),t._v(" "),s("tr",[s("td",[t._v("run > gdb.out")]),t._v(" "),s("td",[t._v("将程序输出重定向到输出文件,可避免"),s("code",[t._v("cout")]),t._v("内容污染输出")])]),t._v(" "),s("tr",[s("td",[t._v("run 参数")]),t._v(" "),s("td",[t._v("指定命令行参数，效果同"),s("code",[t._v("set args xxx")])])])])]),t._v(" "),s("h3",{attrs:{id:"停止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[t._v("#")]),t._v(" 停止")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("run/r")]),t._v(" "),s("td",[t._v("启动直到第一个断点")])]),t._v(" "),s("tr",[s("td",[t._v("kill")]),t._v(" "),s("td",[t._v("停止程序执行")])]),t._v(" "),s("tr",[s("td",[t._v("quit/q")]),t._v(" "),s("td",[t._v("退出gdb调试")])])])]),t._v(" "),s("h2",{attrs:{id:"源代码管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源代码管理"}},[t._v("#")]),t._v(" 源代码管理")]),t._v(" "),s("h3",{attrs:{id:"查看源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看源码"}},[t._v("#")]),t._v(" 查看源码")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("list/l")]),t._v(" "),s("td",[t._v("查看当前所在行，前后1/2 listsize")])]),t._v(" "),s("tr",[s("td",[t._v("l 行号/-行号")]),t._v(" "),s("td",[t._v("往后/前显示指定行的代码， 前后1/2 listsize")])]),t._v(" "),s("tr",[s("td",[t._v("l 行号1,行号2")]),t._v(" "),s("td",[t._v("行号1到行号2的代码")])]),t._v(" "),s("tr",[s("td",[t._v("l 文件名：行号")]),t._v(" "),s("td",[t._v("指定文件指定行的代码")])])])]),t._v(" "),s("h3",{attrs:{id:"源码参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源码参数"}},[t._v("#")]),t._v(" 源码参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("set listsize 数字")]),t._v(" "),s("td",[t._v("设置listsize")])]),t._v(" "),s("tr",[s("td",[t._v("show listsize")]),t._v(" "),s("td",[t._v("查看一次显示的代码行数")])])])]),t._v(" "),s("h3",{attrs:{id:"源代码路径设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源代码路径设置"}},[t._v("#")]),t._v(" 源代码路径设置")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("directory/dir 目录名")]),t._v(" "),s("td",[t._v("添加目录到源码搜索路径中")])]),t._v(" "),s("tr",[s("td",[t._v("show directory")]),t._v(" "),s("td",[t._v("查看源码搜索路径")])]),t._v(" "),s("tr",[s("td",[t._v("directory/dir")]),t._v(" "),s("td",[t._v("清空添加的源码搜索路径(需细到cpp直接路径，多个文件需改路径，这方式不合适)")])]),t._v(" "),s("tr",[s("td",[t._v("set substitute-path")]),t._v(" "),s("td",[t._v("设置替换路径"),s("code",[t._v("set substitute-path /pub/smdev3.1 /home/cy1/smdev")])])])])]),t._v(" "),s("h2",{attrs:{id:"断点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#断点"}},[t._v("#")]),t._v(" 断点")]),t._v(" "),s("h3",{attrs:{id:"常规断点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常规断点"}},[t._v("#")]),t._v(" 常规断点")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("break/b [文件名:]行号")]),t._v(" "),s("td",[t._v("指定文件指定行号，没有指定文件则表示当前文件")])]),t._v(" "),s("tr",[s("td",[t._v("b [类名::/文件名:]函数名[(参数列表)]")]),t._v(" "),s("td",[t._v("在所有本函数断点,可以限定指定类名/文件名称，也可限定参数列表")])]),t._v(" "),s("tr",[s("td",[t._v("b 行号 if 条件")]),t._v(" "),s("td",[t._v("条件断点 ，支持多条件 "),s("code",[t._v("b 18 if (i==2 && j ==5)")])])]),t._v(" "),s("tr",[s("td",[t._v("b *指针地址")]),t._v(" "),s("td",[t._v("指定地址设置断点，比如函数")])]),t._v(" "),s("tr",[s("td",[t._v("b +/-偏移量")]),t._v(" "),s("td",[t._v("当前断点位置，偏移多少地址设置断点")])]),t._v(" "),s("tr",[s("td",[t._v("tbreak/tb")]),t._v(" "),s("td",[t._v("临时断点，命中一次后删除")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("针对参数列表的限定， 注意std::string参数，其表示比较特别")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对应GetStr(double, string)")]),t._v("\nb GetStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("double, std::__cxx11::basic_string"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("char, std::char_traits"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("char"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(", std::allocator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("char"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"断点管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#断点管理"}},[t._v("#")]),t._v(" 断点管理")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("info break / ib")]),t._v(" "),s("td",[t._v("查看断点")])]),t._v(" "),s("tr",[s("td",[t._v("delete / del")]),t._v(" "),s("td",[t._v("清楚所有断点")])]),t._v(" "),s("tr",[s("td",[t._v("del start[,end ]")]),t._v(" "),s("td",[t._v("指定序号或指定序号范围删除")])]),t._v(" "),s("tr",[s("td",[t._v("enable/disable 断点编号")]),t._v(" "),s("td",[t._v("启用，不启用断点")])])])]),t._v(" "),s("h3",{attrs:{id:"观察点watch-catch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#观察点watch-catch"}},[t._v("#")]),t._v(" 观察点watch，catch")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("watch")]),t._v(" "),s("td",[t._v("观察表达式的值是否有变化，紧挨两句一样值的场景下不会命中")])]),t._v(" "),s("tr",[s("td",[t._v("rwatch")]),t._v(" "),s("td",[t._v("读取指定字段时命中")])]),t._v(" "),s("tr",[s("td",[t._v("awatch")]),t._v(" "),s("td",[t._v("read/write命中      （观察何时修改比较合适）")])]),t._v(" "),s("tr",[s("td",[t._v("catch throw")]),t._v(" "),s("td",[t._v("抛出异常时能被捕获")])])])]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("code",[t._v("info break")]),t._v(" 可查看已打的watch断点， 或使用"),s("code",[t._v("i watchpoints")]),t._v("也可以")]),t._v(" "),s("li",[t._v("可以使用"),s("code",[t._v("enable/disable/delete")]),t._v("进行观察点操作")]),t._v(" "),s("li",[t._v("一般是针对全局的值进行观察;")])])]),t._v(" "),s("h2",{attrs:{id:"执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行"}},[t._v("#")]),t._v(" 执行")]),t._v(" "),s("h3",{attrs:{id:"步进"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步进"}},[t._v("#")]),t._v(" 步进")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("continue / c")]),t._v(" "),s("td",[t._v("继续")])]),t._v(" "),s("tr",[s("td",[t._v("next / n [步数]")]),t._v(" "),s("td",[t._v("逐过程执行指定次数")])]),t._v(" "),s("tr",[s("td",[t._v("step / s   [步数]")]),t._v(" "),s("td",[t._v("逐语句执行指定次数")])]),t._v(" "),s("tr",[s("td",[t._v("finish / fin")]),t._v(" "),s("td",[t._v("跳出当前执行函数")])]),t._v(" "),s("tr",[s("td",[t._v("where")]),t._v(" "),s("td",[t._v("查看当前代码行数和函数")])])])]),t._v(" "),s("h3",{attrs:{id:"查看信息-断点-线程-寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看信息-断点-线程-寄存器"}},[t._v("#")]),t._v(" 查看信息(断点/线程/寄存器)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("i b")]),t._v(" "),s("td",[t._v("查看断点(breakpoint, watchpoint, catch)")])]),t._v(" "),s("tr",[s("td",[t._v("i registers")]),t._v(" "),s("td",[t._v("查看寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("i threads")]),t._v(" "),s("td",[t._v("查看线程")])]),t._v(" "),s("tr",[s("td",[t._v("i args")]),t._v(" "),s("td",[t._v("查看参数")])]),t._v(" "),s("tr",[s("td",[t._v("i locals")]),t._v(" "),s("td",[t._v("查看当前作用域的局部变量")])]),t._v(" "),s("tr",[s("td",[t._v("i display")]),t._v(" "),s("td",[t._v("查看当前自动展示变量")])])])]),t._v(" "),s("h3",{attrs:{id:"查看变量类型信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看变量类型信息"}},[t._v("#")]),t._v(" 查看变量类型信息")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ptype 变量/数据类型")]),t._v(" "),s("td",[t._v("查看变量或类型的详细信息")])]),t._v(" "),s("tr",[s("td",[t._v("whatis 变量")]),t._v(" "),s("td",[t._v("查看变量的类型,原始类型")])])])]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("ptype的几点说明\n"),s("ul",[s("li",[s("code",[t._v("/r")]),t._v(": 原始数据方式展示,不代替typedef")]),t._v(" "),s("li",[s("code",[t._v("/m")]),t._v(": 不查看函数")]),t._v(" "),s("li",[s("code",[t._v("/o")]),t._v(": 打印偏移量和大小")])])])])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# typedef std::string mystring;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mystring g_str;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" whatis g_str\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mystring\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ptype g_str\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" std::string\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ptype /M a\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" class Clza "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  private:\n    int a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    double b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    std::string c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    char d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  public:\n    int getA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("void"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" const"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    double getB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("void"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" const"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 隐藏函数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ptype /m a\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" class Clza "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  private:\n    int a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    double b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    std::string c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    char d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示偏移量和大小, 若有虚函数,则虚函数会占用8个字节用于保存指针,多个虚函数不会成倍增加占用空间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ptype /o a\n/* offset      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("    size */  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" class Clza "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                             private:\n/*      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" */    int a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n/* XXX  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("-byte hole      */\n/*      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" */    double b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n/*     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v(" */    std::string c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n/*     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" */    char d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n/* XXX  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("-byte padding   */\n\n                               /* total size "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("56")]),t._v(" */\n                             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br")])]),s("h3",{attrs:{id:"查看和改变变量值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看和改变变量值"}},[t._v("#")]),t._v(" 查看和改变变量值")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("p [文件名:]变量名")]),t._v(" "),s("td",[t._v("查看指定变量")])]),t._v(" "),s("tr",[s("td",[t._v("x [/nfu] 地址")]),t._v(" "),s("td",[t._v("指定格式查看变量")])]),t._v(" "),s("tr",[s("td",[t._v("display 变量")]),t._v(" "),s("td",[t._v("显示变量值")])])])]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("display 至此后info查看,enable/disable/delete/undisplay来启用,删除")]),t._v(" "),s("li",[s("code",[t._v("x")]),t._v("或"),s("code",[t._v("p")]),t._v("的集中展现方式:\n| 命令     | 含义                 |\n| -------- | -------------------- |\n| 不带选项 | 默认展示16进制地址   |\n| /[数量]c | 显示字符           |\n| /[数量]s | 显示字符串           |\n| /[数量]d/u | 查看指定数量的内存值, 10进制展示 |\n| /[数量]x | 从当前地址展示指定数量的16进制数 |")]),t._v(" "),s("li",[s("code",[t._v("x")]),t._v("查看的是内存布局,针对string实际上是一个类, 看到的并不仅仅是字符串,还有字符串长度等;")]),t._v(" "),s("li",[s("code",[t._v("i r rdi / rsi")]),t._v(" 一般能看到函数的两个参数；")])])]),t._v(" "),s("h2",{attrs:{id:"调用栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用栈"}},[t._v("#")]),t._v(" 调用栈")]),t._v(" "),s("h3",{attrs:{id:"查看帧信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看帧信息"}},[t._v("#")]),t._v(" 查看帧信息")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("bt  [-][栈帧数]")]),t._v(" "),s("td",[t._v("查看指定数量的栈帧, -代表方向反")])]),t._v(" "),s("tr",[s("td",[t._v("bt full")]),t._v(" "),s("td",[t._v("显示所有栈帧的局部变量")])]),t._v(" "),s("tr",[s("td",[t._v("f [栈编号]")]),t._v(" "),s("td",[t._v("进入指定栈帧")])]),t._v(" "),s("tr",[s("td",[t._v("i frame")]),t._v(" "),s("td",[t._v("查看帧详情")])]),t._v(" "),s("tr",[s("td",[t._v("info args")]),t._v(" "),s("td",[t._v("查看参数")])]),t._v(" "),s("tr",[s("td",[t._v("info locals")]),t._v(" "),s("td",[t._v("查看当前帧的局部变量")])])])]),t._v(" "),s("h3",{attrs:{id:"修改帧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改帧"}},[t._v("#")]),t._v(" 修改帧")]),t._v(" "),s("ul",[s("li",[t._v("修改值有两种方式:")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" a.a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\np a.a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"gdb设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gdb设置"}},[t._v("#")]),t._v(" gdb设置")]),t._v(" "),s("ul",[s("li",[t._v("gdb可以通过命令行实时设置,也可以通过配置文件设置"),s("code",[t._v("~/.gdbinit")])])]),t._v(" "),s("h3",{attrs:{id:"日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志"}},[t._v("#")]),t._v(" 日志")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("set logging on/off")]),t._v(" "),s("td",[t._v("设置日志开关")])]),t._v(" "),s("tr",[s("td",[t._v("show logging")]),t._v(" "),s("td",[t._v("展示日志开关")])]),t._v(" "),s("tr",[s("td",[t._v("set logging file 1.log")]),t._v(" "),s("td",[t._v("设置日志名称")])])])]),t._v(" "),s("h3",{attrs:{id:"展示优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#展示优化"}},[t._v("#")]),t._v(" 展示优化")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("set print pretty on/off")]),t._v(" "),s("td",[t._v("格式化结构体")])]),t._v(" "),s("tr",[s("td",[t._v("set print array on/off")]),t._v(" "),s("td",[t._v("格式化数组")])])])]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("code",[t._v("show print pretty/array")]),t._v("可以查看")])])]),t._v(" "),s("h2",{attrs:{id:"手动产生core"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动产生core"}},[t._v("#")]),t._v(" 手动产生core")]),t._v(" "),s("ul",[s("li",[t._v("gdb进入命令行直接产生core")]),t._v(" "),s("li",[t._v("针对正在运行中的程序,需要明确卡的原因,可以先"),s("code",[t._v("attach")]),t._v(",在产生core,完成后"),s("code",[t._v("detach")]),t._v("；")]),t._v(" "),s("li",[t._v("针对vs,也可以在windows的进程管理器中,使用"),s("code",[t._v("创建转储文件")]),t._v("产生, 然后采用vs打开"),s("code",[t._v("*.dmp")]),t._v("文件,也可以调试查看;")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("gcore a.core\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"gdb查看汇编和修改程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gdb查看汇编和修改程序"}},[t._v("#")]),t._v(" gdb查看汇编和修改程序")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("gdb --write a.out")]),t._v("修改后,退出即完成修改;")]),t._v(" "),s("li",[t._v("查看汇编代码")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("disassemble /mr valid\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" disassemble /mr valid\nDump of assembler code "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" _Z5validi:\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v("      bool valid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   0x00005555555562f1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v(":     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("55")]),t._v("                      push   %rbp\n   0x00005555555562f2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(":     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" e5                mov    %rsp,%rbp\n   0x00005555555562f5 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v(":     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("83")]),t._v(" ec "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("             sub    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0x20")]),t._v(",%rsp\n   0x00005555555562f9 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("8")]),t._v(">")]),t._v(":     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" 7d ec                mov    %edi,-0x14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rbp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("41")]),t._v("        bool ret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 0x00005555555562fc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+1"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(":    c6 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" ff 01             movb   "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0x1")]),t._v(",-0x1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rbp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("456")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   0x0000555555556300 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+1"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("5")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("81")]),t._v(" 7d ec c8 01 00 00    cmpl   "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0x1c8")]),t._v(",-0x14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rbp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   0x0000555555556307 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+2"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("74")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("                   je     0x55555555633b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_Z5validi+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("43")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),t._v("          cerr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wrong pass"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   0x0000555555556309 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+2"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" 8d 05 06 0d 00 00    lea    0xd06"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",%rax        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0x555555557016")]),t._v("\n   0x0000555555556310 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+3"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" c6                mov    %rax,%rsi\n   0x0000555555556313 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+3"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" 8d 05 c6 2d 00 00    lea    0x2dc6"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",%rax        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0x5555555590e0 <_ZSt4cerr@GLIBCXX_3.4>")]),t._v("\n   0x000055555555631a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+4"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" c7                mov    %rax,%rdi\n   0x000055555555631d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+4"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v(":    e8 9e fd ff ff          call   0x5555555560c0 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc@plt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   0x0000555555556322 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+4"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" 8b "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("87")]),t._v(" 2c 00 00    mov    0x2c87"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",%rdx        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0x555555558fb0")]),t._v("\n   0x0000555555556329 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+5"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("6")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" d6                mov    %rdx,%rsi\n   0x000055555555632c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+5"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(":    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" c7                mov    %rax,%rdi\n   0x000055555555632f "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+6"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(":    e8 9c fd ff ff          call   0x5555555560d0 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_ZNSolsEPFRSoS_E@plt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   0x0000555555556334 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+6"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("7")]),t._v(">")]),t._v(":    b8 00 00 00 00          mov    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0x0")]),t._v(",%eax\n   0x0000555555556339 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(":    eb 04                   jmp    0x55555555633f "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_Z5validi+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("8")]),t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("46")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" ret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   0x000055555555633b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v(">")]),t._v(":    0f b6 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" ff             movzbl -0x1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("%rbp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",%eax\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   0x000055555555633f "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("8")]),t._v(">")]),t._v(":    c9                      leave\n   0x0000555555556340 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("+7"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("9")]),t._v(">")]),t._v(":    c3                      ret\n\nEnd of assembler dump.\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br")])]),s("h2",{attrs:{id:"多线程调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多线程调试"}},[t._v("#")]),t._v(" 多线程调试")]),t._v(" "),s("h3",{attrs:{id:"死锁问题跟踪"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#死锁问题跟踪"}},[t._v("#")]),t._v(" 死锁问题跟踪")]),t._v(" "),s("ul",[s("li",[t._v("死锁代码")])]),t._v(" "),s("div",{staticClass:"language-cpp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<iostream>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<unistd.h>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<mutex>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<thread>")])]),t._v("\n\nstd"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex _mutex1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstd"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex _mutex2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" data1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" data2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" std"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("do_work_1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"thread 1 begin work ..."')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlock_guard"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locker1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_mutex1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdata1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tstd"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("this_thread"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep_for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("chrono"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlock_guard"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locker2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_mutex2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdata2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"thread 1 work done"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("do_work_2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"thread 2 begin work ..."')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlock_guard"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locker2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_mutex2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdata2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tstd"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("this_thread"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep_for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("chrono"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seconds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlock_guard"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("mutex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locker1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_mutex1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdata1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"thread 2 work done"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tthread "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("t1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("do_work_1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tthread "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("t2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("do_work_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tt1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tt2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tcout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"==== all done ==== "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" endl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br")])]),s("ul",[s("li",[t._v("运行程序后, 会出现死锁")]),t._v(" "),s("li",[s("code",[t._v("gdb attach gid")])]),t._v(" "),s("li",[t._v("查看所有线程堆栈")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("thread apply all bt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("输出: (从以下输出可以看到线程均卡在lock_guard处)")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("Thread "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Thread 0x7f933bd3e6c0 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LWP "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("984744")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a.out"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  futex_wait (private=0, expected=2, futex_word=0x5569d49dc1e0 <_mutex1>) at ../sysdeps/nptl/futex-internal.h:146")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1  __GI___lll_lock_wait (futex=futex@entry=0x5569d49dc1e0 <_mutex1>, private=0) at ./nptl/lowlevellock.c:49")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2  0x00007f933c6ab3c2 in lll_mutex_lock_optimized (mutex=0x5569d49dc1e0 <_mutex1>) at ./nptl/pthread_mutex_lock.c:48")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3  ___pthread_mutex_lock (mutex=0x5569d49dc1e0 <_mutex1>) at ./nptl/pthread_mutex_lock.c:93")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4  0x00005569d49d95c6 in __gthread_mutex_lock (__mutex=0x5569d49dc1e0 <_mutex1>) at /usr/include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:749")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5  0x00005569d49d9650 in std::mutex::lock (this=0x5569d49dc1e0 <_mutex1>) at /usr/include/c++/12/bits/std_mutex.h:100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#6  0x00005569d49d9766 in std::lock_guard<std::mutex>::lock_guard (this=0x7f933bd3dde0, __m=...) at /usr/include/c++/12/bits/std_mutex.h:229")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#7  0x00005569d49d93e3 in do_work_2 () at main.cpp:31")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#8  0x00005569d49d9fbb in std::__invoke_impl<void, void (*)()> (__f=@0x5569d676e008: 0x5569d49d934e <do_work_2()>) at /usr/include/c++/12/bits/invoke.h:61")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#9  0x00005569d49d9f73 in std::__invoke<void (*)()> (__fn=@0x5569d676e008: 0x5569d49d934e <do_work_2()>) at /usr/include/c++/12/bits/invoke.h:96")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#10 0x00005569d49d9f20 in std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul> (this=0x5569d676e008) at /usr/include/c++/12/bits/std_thread.h:252")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#11 0x00005569d49d9ef4 in std::thread::_Invoker<std::tuple<void (*)()> >::operator() (this=0x5569d676e008) at /usr/include/c++/12/bits/std_thread.h:259")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#12 0x00005569d49d9ed8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run (this=0x5569d676e000) at /usr/include/c++/12/bits/std_thread.h:210")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#13 0x00007f933c8d44a3 in ?? () from /lib/x86_64-linux-gnu/libstdc++.so.6")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#14 0x00007f933c6a8134 in start_thread (arg=<optimized out>) at ./nptl/pthread_create.c:442")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#15 0x00007f933c7287dc in clone3 () at ../sysdeps/unix/sysv/linux/x86_64/clone3.S:81")]),t._v("\n\nThread "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Thread 0x7f933c53f6c0 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LWP "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("984743")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a.out"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  futex_wait (private=0, expected=2, futex_word=0x5569d49dc220 <_mutex2>) at ../sysdeps/nptl/futex-internal.h:146")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1  __GI___lll_lock_wait (futex=futex@entry=0x5569d49dc220 <_mutex2>, private=0) at ./nptl/lowlevellock.c:49")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2  0x00007f933c6ab3c2 in lll_mutex_lock_optimized (mutex=0x5569d49dc220 <_mutex2>) at ./nptl/pthread_mutex_lock.c:48")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3  ___pthread_mutex_lock (mutex=0x5569d49dc220 <_mutex2>) at ./nptl/pthread_mutex_lock.c:93")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4  0x00005569d49d95c6 in __gthread_mutex_lock (__mutex=0x5569d49dc220 <_mutex2>) at /usr/include/x86_64-linux-gnu/c++/12/bits/gthr-default.h:749")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5  0x00005569d49d9650 in std::mutex::lock (this=0x5569d49dc220 <_mutex2>) at /usr/include/c++/12/bits/std_mutex.h:100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#6  0x00005569d49d9766 in std::lock_guard<std::mutex>::lock_guard (this=0x7f933c53ede0, __m=...) at /usr/include/c++/12/bits/std_mutex.h:229")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#7  0x00005569d49d92c9 in do_work_1 () at main.cpp:20")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#8  0x00005569d49d9fbb in std::__invoke_impl<void, void (*)()> (__f=@0x5569d676deb8: 0x5569d49d9234 <do_work_1()>) at /usr/include/c++/12/bits/invoke.h:61")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#9  0x00005569d49d9f73 in std::__invoke<void (*)()> (__fn=@0x5569d676deb8: 0x5569d49d9234 <do_work_1()>) at /usr/include/c++/12/bits/invoke.h:96")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#10 0x00005569d49d9f20 in std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul> (this=0x5569d676deb8) at /usr/include/c++/12/bits/std_thread.h:252")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#11 0x00005569d49d9ef4 in std::thread::_Invoker<std::tuple<void (*)()> >::operator() (this=0x5569d676deb8) at /usr/include/c++/12/bits/std_thread.h:259")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#12 0x00005569d49d9ed8 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run (this=0x5569d676deb0) at /usr/include/c++/12/bits/std_thread.h:210")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#13 0x00007f933c8d44a3 in ?? () from /lib/x86_64-linux-gnu/libstdc++.so.6")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#14 0x00007f933c6a8134 in start_thread (arg=<optimized out>) at ./nptl/pthread_create.c:442")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#15 0x00007f933c7287dc in clone3 () at ../sysdeps/unix/sysv/linux/x86_64/clone3.S:81")]),t._v("\n\nThread "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Thread 0x7f933cab4740 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LWP "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("984742")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a.out"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  __futex_abstimed_wait_common64 (private=128, cancel=true, abstime=0x0, op=265, expected=984743, futex_word=0x7f933c53f990) at ./nptl/futex-internal.c:57")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1  __futex_abstimed_wait_common (futex_word=futex_word@entry=0x7f933c53f990, expected=984743, clockid=clockid@entry=0, abstime=abstime@entry=0x0, private=private@entry=128, cancel=cancel@entry=true) at ./nptl/futex-internal.c:87")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2  0x00007f933c6a4efb in __GI___futex_abstimed_wait_cancelable64 (futex_word=futex_word@entry=0x7f933c53f990, expected=<optimized out>, clockid=clockid@entry=0, abstime=abstime@entry=0x0, private=private@entry=128) at ./nptl/futex-internal.c:139")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3  0x00007f933c6a9c23 in __pthread_clockjoin_ex (threadid=140270349055680, thread_return=0x0, clockid=0, abstime=0x0, block=<optimized out>) at ./nptl/pthread_join_common.c:102")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4  0x00007f933c8d4517 in std::thread::join() () from /lib/x86_64-linux-gnu/libstdc++.so.6")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5  0x00005569d49d94b0 in main (argc=1, argv=0x7ffe9de48968) at main.cpp:41")]),t._v("\nDetaching from program: /hdd/tmp/c/a.out, process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("984742")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Inferior "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("984742")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" detached"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);
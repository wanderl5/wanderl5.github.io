(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{391:function(s,a,t){s.exports=t.p+"assets/img/2023-01-30-12-49-11.b87de311.png"},827:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("code",[s._v("git init")]),s._v("  命令初始化或者"),a("code",[s._v("git clone")]),s._v("后，会得到隐藏文件夹.git，此文件用于保存配置，同时也是本地仓库(内含文件,索引,日志等);")]),s._v(" "),a("p",[s._v("以下是.git的文件夹具体说明：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("└── .git\n    ├── COMMIT_EDITMSG    # 保存最新的commit message\n    ├── config    \t# 仓库的配置文件\n    ├── description # 仓库的描述信息，主要给gitweb使用\n    ├── HEAD    \t# 指向当前分支\n    ├── hooks    \t# 存放一些shell脚本，可以设置特定的git命令后触发相应的脚本\n    ├── index    \t# 二进制暂存区（stage）\n    ├── info    \t# 仓库的其他信息\n    │   └── exclude # 本地的排除文件规则，功能和.gitignore类似\n    ├── logs    \t# 保存所有更新操作的引用记录，主要用于git reflog等\n    ├── objects     # 所有文件的存储对象\n    └── refs   \t    # 具体的引用，主要存储分支和标签的引用\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"config-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-配置"}},[s._v("#")]),s._v(" config（配置）")]),s._v(" "),a("p",[s._v("config 文件顾名思义就是包含项目特有的配置选项。默认配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cat config\n[core]\n\trepositoryformatversion = 0\n\t# 视文件权限的修改是否为差异。如果为true，git把文件权限也算作文件差异的一部分\n\tfilemode = false\n\t# 裸仓库。在git init初始化的时候我们可以加上--bare参数来决定是否创建一个裸仓库。在普通的git存储库中，存储库中有一个.git文件夹，其中包含所有相关数据和所有其他文件，用于构建工作副本。在一个裸仓库中，没有.git文件夹存储工作副本，会把init初始化的7个文件或文件夹直接放在项目根目录上\n\tbare = false\n\tlogallrefupdates = true\n\tsymlinks = false\n\t# 忽略文件的大小写，ignorecase为true，当文件readme.md改为Readme.md，git会忽略这个改动（默认是忽略大小写）\n\tignorecase = true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("我们用的比较多的是用户配置。例如提交commit需要的用户名和邮箱，使用--local设置当前提交的用户名：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ git config --local user.name soar0216\n$ cat config\n...\n[user]\n\tname = soar0216\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("直接修改 config 文件和使用命令行修改配置效果一样,建议使用命令修改")])]),s._v(" "),a("h2",{attrs:{id:"info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#info"}},[s._v("#")]),s._v(" info")]),s._v(" "),a("ul",[a("li",[s._v("info/exclude，与 .gitignore 功能类似，用于排除提交文件。区别在于.gitignore 会提交到版本库去，大家共享；而info/exclude 这里设置的是本地需排除文件，不影响其他人，也不提交到版本库。")]),s._v(" "),a("li",[s._v("info/refs，可跟踪分支信息。一般通过命令 "),a("code",[s._v("git update-server-info")]),s._v(" 生成")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cat info/refs\na0ce8c3e3f8cfbc8f2e88ffd49ce45941f7d7af3\trefs/heads/feature/1\na0ce8c3e3f8cfbc8f2e88ffd49ce45941f7d7af3\trefs/heads/master\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("info/refs其中一个作用就是用于"),a("code",[s._v("git clone")]),s._v("过程。执行"),a("code",[s._v("git clone...")]),s._v("后，它做的第一件事就是获取 info/refs 文件，这样就知道远程仓库的所有分支和引用信息。这个文件是在服务端运行了 update-server-info 所生成的。")]),s._v(" "),a("h2",{attrs:{id:"head"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#head"}},[s._v("#")]),s._v(" HEAD")]),s._v(" "),a("p",[s._v("此文件永远存储当前位置指针，指向当前工作区的分支。就像 linux 中的 $PWD 变量(指向当前目录)一样，永远指向当前位置，表明当前的工作位置。当我们在master分支时，HEAD文件的内容为：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cat HEAD\nref: refs/heads/master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"objects"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objects"}},[s._v("#")]),s._v(" objects/")]),s._v(" "),a("p",[s._v("在初始化的时候，objects里有两个空的文件夹：info和pack，后面具体介绍；")]),s._v(" "),a("p",[s._v("在执行了"),a("code",[s._v("git add")]),s._v("之后，文件就已经存入objects里，针对文件内容不同，会产生一个文件夹；")]),s._v(" "),a("p",[s._v("另外，执行commit也会产生一些文件")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：完全相同文件在git中仅会产生一个object文件")])]),s._v(" "),a("h3",{attrs:{id:"使用add提交暂存区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用add提交暂存区"}},[s._v("#")]),s._v(" 使用add提交暂存区：")]),s._v(" "),a("ul",[a("li",[s._v('新建3个文件：1.txt和2.txt完全相同（内容为"ni hao"），3.txt不同(内容为"333")')]),s._v(" "),a("li",[s._v("执行 "),a("code",[s._v("git add .")]),s._v("  ，使文件进入暂存区")]),s._v(" "),a("li",[s._v("查看暂存区文件：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hash值组成： object文件夹 + 各文件的hash值")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-files "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据hash值可查看实际内容")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 9b071c2\nblob\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 9b071c2\nni hao\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v("  55bd0ac4\nblob\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("  55bd0ac4\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("查看object下文件")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("E:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("gitee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tree /F .git/objects/\n卷 Data 的文件夹 "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" 列表\n卷序列号为 F2CF-46C2\nE:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GITEE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("CY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".GIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("OBJECTS\n├─55\n│      bd0ac4c42e46cd751eb7405e12a35e61425550\n│\n├─9b\n│      071c28be67ca485f84161673d01eab9476ad8d\n│\n├─info\n└─pack\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("ul",[a("li",[s._v("1.txt和2.txt因为内容相同，git仅存储成一个文本，对应9b下的071c28b对应的文件")])])]),s._v(" "),a("h3",{attrs:{id:"使用commit提交"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用commit提交"}},[s._v("#")]),s._v(" 使用commit提交：")]),s._v(" "),a("ul",[a("li",[s._v("执行 "),a("code",[s._v('git commit -m "commit 1"')]),s._v("  ，使文件进入本地仓库")]),s._v(" "),a("li",[s._v("查看提交日志：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n$ git-log\n* 64cc225 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("ul",[a("li",[s._v("git-log需在~/.bash_profile中设置alias")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" git-log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git log --pretty=oneline --all --graph --abbrev-commit'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("ul",[a("li",[s._v("检查object下情况：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("E:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("gitee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tree /F .git/objects/\n卷 Data 的文件夹 "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" 列表\n卷序列号为 F2CF-46C2\nE:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GITEE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("CY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".GIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("OBJECTS\n├─55\n│      bd0ac4c42e46cd751eb7405e12a35e61425550\n│\n├─64\n│      cc225b67f109c97c3326a1d0ab1a57253b6f1f\n│\n├─9b\n│      071c28be67ca485f84161673d01eab9476ad8d\n│\n├─ed\n│      e34dd05bb67a1a14c4614841880b2d44645f19\n│\n├─info\n└─pack\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("发现提交后，多了两个文件夹，我们看看分别是什么：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 说明类型是commit")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 64cc225\ncommit\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看提交记录，能看到提交tree的hash值和提交日志")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 64cc225\ntree ede34dd05bb67a1a14c4614841880b2d44645f19\nauthor soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646482050")]),s._v(" +0800\ncommitter soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646482050")]),s._v(" +0800\n\ncommit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据提交hash值查看提交信息")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" ede34dd05bb6\ntree\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ede34dd05bb6\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 9b071c28be67ca485f84161673d01eab9476ad8d    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 9b071c28be67ca485f84161673d01eab9476ad8d    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 55bd0ac4c42e46cd751eb7405e12a35e61425550    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h3",{attrs:{id:"修改1-txt为-ni-hao-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改1-txt为-ni-hao-1"}},[s._v("#")]),s._v(' 修改1.txt为"ni hao 1"')]),s._v(" "),a("ul",[a("li",[a("p",[s._v("修改1.txt并add提交到暂存区，再使用"),a("code",[s._v("git ls-files --stage")]),s._v("命令会发现1.txt的hash值已变化，即产生了新的文件\n"),a("img",{attrs:{src:t(391),alt:"2023-01-30-12-49-11.png"}})])]),s._v(" "),a("li",[a("p",[s._v("去object下证实下：")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("E:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("gitee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tree /F .git/objects/\n卷 Data 的文件夹 "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" 列表\n卷序列号为 F2CF-46C2\nE:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("GITEE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("CY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".GIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("OBJECTS\n├─55\n│      bd0ac4c42e46cd751eb7405e12a35e61425550│\n├─64\n│      cc225b67f109c97c3326a1d0ab1a57253b6f1f│\n├─95\n│      6c7248c373363cbd03958aaa38e5035ac6cf1e│\n├─9b\n│      071c28be67ca485f84161673d01eab9476ad8d    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 本次新增内容，用于存放新的1.txt│")]),s._v("\n├─ed\n│      e34dd05bb67a1a14c4614841880b2d44645f19│\n├─info\n└─pack\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("commit 1.txt")])]),s._v(" "),a("p",[s._v("检查日志看到提交记录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commit 2"')]),s._v("\n$ git-log\n* df02912 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n* 64cc225 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" df02912\ntree b0ba9dca86f9704b29b2adf471bd8f9b251bcf54\nparent 64cc225b67f109c97c3326a1d0ab1a57253b6f1f   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 上次修改的指针，即上次的提交")]),s._v("\nauthor soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646483371")]),s._v(" +0800\ncommitter soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646483371")]),s._v(" +0800\n\ncommit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n \n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" b0ba9dca86f                      \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 本次仅修改1个文件，但展示的仍是全部文件，说明是快照的概念（全部文件的指针,区分blob-文件,tree-文件夹）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 956c7248c373363cbd03958aaa38e5035ac6cf1e    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 9b071c28be67ca485f84161673d01eab9476ad8d    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" blob 55bd0ac4c42e46cd751eb7405e12a35e61425550    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("  64cc225b67f\ntree ede34dd05bb67a1a14c4614841880b2d44645f19\nauthor soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646482050")]),s._v(" +0800\ncommitter soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646482050")]),s._v(" +0800\n\ncommit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("ul",[a("li",[s._v("检查object，发现也新增了两个文件夹用于记录本次提交")])]),s._v(" "),a("h3",{attrs:{id:"修改1-txt使其与3-txt相同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改1-txt使其与3-txt相同"}},[s._v("#")]),s._v(" 修改1.txt使其与3.txt相同")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"333"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-files "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 956c7248c373363cbd03958aaa38e5035ac6cf1e "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-files "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 发现没有新增文件，直接跟3.txt使用同一个文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"pack和info文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pack和info文件夹"}},[s._v("#")]),s._v(" pack和info文件夹")]),s._v(" "),a("p",[s._v("Git 往磁盘保存对象时默认使用的格式叫松散对象 (loose object) 格式，当你对同一个文件修改哪怕一行，git 都会使用全新的文件存储这个修改了的文件，放在objects中，Git 时不时将这些对象打包至一个叫 packfile 的二进制文件以节省空间并提高效率；")]),s._v(" "),a("p",[s._v("触发gc时机：")]),s._v(" "),a("ul",[a("li",[s._v("当版本库中有太多的松散对象；")]),s._v(" "),a("li",[s._v("手动执行 "),a("code",[s._v("git gc")]),s._v(" 命令；")]),s._v(" "),a("li",[s._v("向远程服务器执行推送push；")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" .git/objects/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" f\n.git/objects/55/bd0ac4c42e46cd751eb7405e12a35e61425550\n.git/objects/64/cc225b67f109c97c3326a1d0ab1a57253b6f1f\n.git/objects/95/6c7248c373363cbd03958aaa38e5035ac6cf1e\n.git/objects/9b/071c28be67ca485f84161673d01eab9476ad8d\n.git/objects/b0/ba9dca86f9704b29b2adf471bd8f9b251bcf54\n.git/objects/df/029122843841cb25b5cb97cb74f7c162186233\n.git/objects/ed/e34dd05bb67a1a14c4614841880b2d44645f19\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" gc\nEnumerating objects: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(", done.\nCounting objects: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", done.\nDelta compression using up to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" threads\nCompressing objects: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", done.\nWriting objects: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("/7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", done.\nTotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("delta "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", reused "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("delta "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", pack-reused "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-files "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" .git/objects "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" f\n.git/objects/info/commit-graph\n.git/objects/info/packs\n.git/objects/pack/pack-18ebf28977eef7f01eec61956abb122aa5853103.idx\n.git/objects/pack/pack-18ebf28977eef7f01eec61956abb122aa5853103.pack\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .git/objects/info/packs\nP pack-18ebf28977eef7f01eec61956abb122aa5853103.pack\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看包内的文件情况，实际跟之前看的是一样的")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" verify-pack "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" .git/objects/pack/pack-18ebf28977eef7f01eec61956abb122aa5853103.idx\ndf029122843841cb25b5cb97cb74f7c162186233 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("219")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("147")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n64cc225b67f109c97c3326a1d0ab1a57253b6f1f commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("171")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("115")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("159")]),s._v("\n55bd0ac4c42e46cd751eb7405e12a35e61425550 blob   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("274")]),s._v("\n9b071c28be67ca485f84161673d01eab9476ad8d blob   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("287")]),s._v("\nb0ba9dca86f9704b29b2adf471bd8f9b251bcf54 tree   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("303")]),s._v("\n956c7248c373363cbd03958aaa38e5035ac6cf1e blob   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("399")]),s._v("\nede34dd05bb67a1a14c4614841880b2d44645f19 tree   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("74")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("417")]),s._v("\nnon delta: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" objects\n.git/objects/pack/pack-18ebf28977eef7f01eec61956abb122aa5853103.pack: ok\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 55bd0ac4c4\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" df02912\ntree b0ba9dca86f9704b29b2adf471bd8f9b251bcf54\nparent 64cc225b67f109c97c3326a1d0ab1a57253b6f1f\nauthor soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646483371")]),s._v(" +0800\ncommitter soar0216 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("baiyun0431@erayt.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1646483371")]),s._v(" +0800\n\ncommit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("p",[a("code",[s._v("git gc")]),s._v(" 后，所有文件（针对部分文件从来没有commit过,该文件不会pack）会被打包到pack里，.pack 存储对象文件，.idx 是索引文件，用于随机访问；")]),s._v(" "),a("p",[s._v("info 文件夹记录对象存储的附加信息，这里存储着打包后的文件名。")]),s._v(" "),a("h2",{attrs:{id:"index-暂存区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-暂存区"}},[s._v("#")]),s._v(" index（暂存区）")]),s._v(" "),a("p",[s._v("index也称为stage，是一个索引文件。当执行"),a("code",[s._v("git add")]),s._v("后，文件就会存入objects里，并使用索引进行定位。所以，只要执行了"),a("code",[s._v("git add")]),s._v("，就算工作目录中的文件被误删除，也不会引起文件的丢失；创建了一个提交(commit), 那么提交的是当前索引(index)里的内容, 而不是工作目录中的内容")]),s._v(" "),a("p",[s._v(".git/index是一个二进制文件，无法用编辑器直接打开查看内容。我们可以通过"),a("code",[s._v("git ls-files --stage")]),s._v("命令看到仓库中每一个文件及其所对应的文件对象。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ls-files "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stage")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 55bd0ac4c42e46cd751eb7405e12a35e61425550 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 9b071c28be67ca485f84161673d01eab9476ad8d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 996935116ffef281805e01ee10bda987887985f6 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v(" 5b1399a49012d09a92eb70dc4feebcd8dc69b4f2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"commit-editmsg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-editmsg"}},[s._v("#")]),s._v(" COMMIT_EDITMSG")]),s._v(" "),a("p",[s._v("执行commit，把代码提交到本地仓库：commit-editmsg会存储最后一次commit的message")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .git/COMMIT_EDITMSG\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("多了两个文件或文件夹：COMMIT-EDITMSG、logs/。\nCOMMIT-EDITMSG是一个临时文件，存储最后一次提交的message，当敲入"),a("code",[s._v("git commit")]),s._v("命令，不加-m的话， 会打开编辑器，其实就是在编辑此文件，而你退出编辑器后，git 会把此文件内容写入 commit 记录。 而执行"),a("code",[s._v("git commit -m 'message'")]),s._v("时，mssage就是COMMIT_EDITMSG的文件内容。")]),s._v(" "),a("blockquote",[a("p",[s._v("该文件的一个应用场景：当你git pull 远程仓库后，新增了很多提交，淹没了本地提交记录，直接 "),a("code",[s._v("cat .git/COMMIT_EDITMSG")]),s._v(" 就可以弄清楚自己最后工作的位置了。")])]),s._v(" "),a("h2",{attrs:{id:"refs-引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refs-引用"}},[s._v("#")]),s._v(" refs/(引用)")]),s._v(" "),a("p",[s._v("refs文件夹存储着分支和标签的引用。下面创建一个分支feature/1，还有给master分支打了一个tag为“v1.0”，那么 现在有两个分支，分别是master和feature/1：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" feature/1\nSwitched to a new branch "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'feature/1'")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\nSwitched to branch "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag v1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("那么refs目录的项目结构为：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- heads\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- master\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- feature   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分支名称按/x,会独立建立文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- tags\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-- v1.0\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .git/refs/heads/feature/1\ne824b67df24e5c2c63349e683774173564d5f5b0\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 4a51f60e47ca4c\ncommit\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n  feature/1  e824b67 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* feature2.0 e824b67 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  master     e824b67 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  \n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .git/refs/tags/v1.0\ne824b67df24e5c2c63349e683774173564d5f5b0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("可以看到 master 和 v1.0 都指向 e824b67df24e5c2c63349e683774173564d5f5b0这个 commit。 refs/heads/ 文件夹内的 ref 一般通过 "),a("code",[s._v("git branch")]),s._v(" 生成。"),a("code",[s._v("git show-ref --heads")]),s._v(" 可以查看； refs/tags/ 文件夹内的 ref 一般通过 "),a("code",[s._v("git tag 生成")]),s._v("。"),a("code",[s._v("git show-ref --tags")]),s._v(" 可以查看。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" show-ref "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--heads")]),s._v("\ne824b67df24e5c2c63349e683774173564d5f5b0 refs/heads/feature/1\ne824b67df24e5c2c63349e683774173564d5f5b0 refs/heads/feature2.0\ne824b67df24e5c2c63349e683774173564d5f5b0 refs/heads/master\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" show-ref "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tags")]),s._v("\ne824b67df24e5c2c63349e683774173564d5f5b0 refs/tags/v1.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 实际这是一次提交commit记录，意思是该分支或tag已经合并到哪个commit基线")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" e824b67\ncommit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[s._v("#")]),s._v(" logs/")]),s._v(" "),a("p",[s._v("logs就是用来记录操作信息的，"),a("code",[s._v("git reflog")]),s._v(" 命令以及像 HEAD@{1} 形式的路径会用到。经过上面例子的操作后，它的目录如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("E:\\gitee\\cy>tree /F .git/refs\nE:\\GITEE\\CY\\.GIT\\REFS\n├─heads\n│  │  feature2.0\n│  │\n│  └─feature\n│          1\n│\n└─tags\n        v1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("HEAD直接记录在所有分支上的操作：（含切换分支，commit等）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cat .git/logs/HEAD\n0000000000000000000000000000000000000000 64cc225b67f109c97c3326a1d0ab1a57253b6f1f soar0216 <baiyun0431@erayt.com> 1646482050 +0800        commit (initial): commit 1\n64cc225b67f109c97c3326a1d0ab1a57253b6f1f df029122843841cb25b5cb97cb74f7c162186233 soar0216 <baiyun0431@erayt.com> 1646483371 +0800        commit: commit 2\ndf029122843841cb25b5cb97cb74f7c162186233 68d575915e3c45d356e3dab1b9b71bd017988c06 soar0216 <baiyun0431@erayt.com> 1646486198 +0800        commit: update 4, update 3\n68d575915e3c45d356e3dab1b9b71bd017988c06 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646486385 +0800        commit: update 4 -> 3\ne824b67df24e5c2c63349e683774173564d5f5b0 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646489101 +0800        checkout: moving from master to feature/1\ne824b67df24e5c2c63349e683774173564d5f5b0 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646489151 +0800        checkout: moving from feature/1 to master\ne824b67df24e5c2c63349e683774173564d5f5b0 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646489203 +0800        checkout: moving from master to feature2.0\n\n$ git reflog\ne824b67 (HEAD -> feature2.0, tag: v1.0, master, feature/1) HEAD@{0}: checkout: moving from master to feature2.0\ne824b67 (HEAD -> feature2.0, tag: v1.0, master, feature/1) HEAD@{1}: checkout: moving from feature/1 to master\ne824b67 (HEAD -> feature2.0, tag: v1.0, master, feature/1) HEAD@{2}: checkout: moving from master to feature/1\ne824b67 (HEAD -> feature2.0, tag: v1.0, master, feature/1) HEAD@{3}: commit: update 4 -> 3\n68d5759 HEAD@{4}: commit: update 4, update 3\ndf02912 HEAD@{5}: commit: commit 2\n64cc225 HEAD@{6}: commit (initial): commit 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("refs/heads里还有master和feature/1文件，记录各自分支的操作记录：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cat .git/logs/refs/heads/master\n0000000000000000000000000000000000000000 64cc225b67f109c97c3326a1d0ab1a57253b6f1f soar0216 <baiyun0431@erayt.com> 1646482050 +0800        commit (initial): commit 1\n64cc225b67f109c97c3326a1d0ab1a57253b6f1f df029122843841cb25b5cb97cb74f7c162186233 soar0216 <baiyun0431@erayt.com> 1646483371 +0800        commit: commit 2\ndf029122843841cb25b5cb97cb74f7c162186233 68d575915e3c45d356e3dab1b9b71bd017988c06 soar0216 <baiyun0431@erayt.com> 1646486198 +0800        commit: update 4, update 3\n68d575915e3c45d356e3dab1b9b71bd017988c06 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646486385 +0800        commit: update 4 -> 3\n\n$ cat .git/logs/refs/heads/feature/1\n0000000000000000000000000000000000000000 e824b67df24e5c2c63349e683774173564d5f5b0 soar0216 <baiyun0431@erayt.com> 1646489101 +0800        branch: Created from HEAD\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("下面是添加一个readme.md文件后进行reset操作，然后又撤销reset操作：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add 4.txt"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("master fb1af99"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" insertion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" deletion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nadmin@LAPTOP-8UNAVVRU MINGW64 /e/gitee/cy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n$ git-log\n* fb1af99 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n* e824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* 68d5759 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* df02912 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n* 64cc225 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    \nadmin@LAPTOP-8UNAVVRU MINGW64 /e/gitee/cy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" HEAD~1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在当前HEAD指针基础往前移动一个提交")]),s._v("\n或者\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" e824b67 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#直接到指定的commit值")]),s._v("\nHEAD is now at e824b67 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fb1af99 提交消失")]),s._v("\nadmin@LAPTOP-8UNAVVRU MINGW64 /e/gitee/cy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n$ git-log\n* e824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* 68d5759 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* df02912 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n* 64cc225 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reflog\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": reset: moving to HEAD~1\nfb1af99 HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from feature2.0 to master\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from master to feature2.0\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from feature/1 to master\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": checkout: moving from master to feature/1\ne824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit: update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n68d5759 HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit: update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ndf02912 HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit: commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n64cc225 HEAD@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到 fb1af99 的提交已经不在此分区了")]),s._v("\n$ git-log\n* e824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master, tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* 68d5759 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* df02912 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n* 64cc225 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果还要回去，则在reflog中找到指定hash值直接reset回去；")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" fb1af99\nHEAD is now at fb1af99 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n\n$ git-log\n* fb1af99 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".txt\n* e824b67 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tag: v1.0, feature2.0, feature/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* 68d5759 update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", update "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n* df02912 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n* 64cc225 commit "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br")])]),a("blockquote",[a("p",[s._v("git reset --hard HEAD~1 , commit会回到上一个, 且文件会直接恢复")])]),s._v(" "),a("h2",{attrs:{id:"description-描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#description-描述"}},[s._v("#")]),s._v(" description（描述）")]),s._v(" "),a("p",[s._v("这个文件用于GitWeb。GitWeb 是 CGI 脚本(Common Gateway Interface，通用网关接口，简单地讲就是运行在Web服务器上的程序, 但由浏览器的输入触发)，让用户在web页面查看git内容。如果我们要启动 GitWeb 可用如下命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保lighttpd已安装: brew install lighttpd")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" instaweb "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--start")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动完成会： 启动 lighttpd 服务并打开浏览器 http://127.0.0.1:1234，页面直接显示当前的 git 仓库名称以及描述")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"hooks-钩子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-钩子"}},[s._v("#")]),s._v(" hooks/(钩子)")]),s._v(" "),a("p",[s._v("hooks里存放 git 提交的各个阶段文件，用于在 git 命令前后做检查或做些自定义动作。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# -F1：在列出的文件名称后加一符号；例如可执行档则加 "*", 目录则加 "/"，1代表一个文件占据一行。\n$ ls -F1 hooks\nprepare-commit-msg.sample*  # git commit 之前，编辑器启动之前触发，传入 COMMIT_FILE，COMMIT_SOURCE，SHA1\ncommit-msg.sample*          # git commit 之前，编辑器退出后触发，传入 COMMIT_EDITMSG 文件名\npre-commit.sample*          # git commit 之前，commit-msg 通过后触发，譬如校验文件名是否含中文\npre-push.sample*            # git push 之前触发\n\npre-receive.sample*         # git push 之后，服务端更新 ref 前触发\nupdate.sample*              # git push 之后，服务端更新每一个 ref 时触发，用于针对每个 ref 作校验等\npost-update.sample*         # git push 之后，服务端更新 ref 后触发\n\npre-rebase.sample*          # git rebase 之前触发，传入 rebase 分支作参数\napplypatch-msg.sample*      # 用于 git am 命令提交信息校验\npre-applypatch.sample*      # 用于 git am 命令执行前动作\nfsmonitor-watchman.sample*  # 配合 core.fsmonitor 设置来更好监测文件变化\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("如果要启用某个 hook，只需把 .sample(样本) 删除即可，然后编辑其内容来实现相应的逻辑。")]),s._v(" "),a("p",[s._v('例如团队规定每次commit都有一个固定的格式，“[姓名]+具体信息”的格式，如果不使用hooks，每次都需要重复去写上"[姓名]"，但利用Git的hooks功能处理每一条commit信息，在每条信息前自动添加"[姓名]"。那么具体的步骤就是在项目目录下找到.git/hooks/commit-msg.sample文件，将该文件重命名为commit-msg，修改该文件的内容为：')]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('name=[`git config user.name`]\ncommit=${name}$(cat $1)\necho "${commit}" > "$1"\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这样的话，在commit时，只需要"),a("code",[s._v("git commit -m'message'")]),s._v('，hooks会把"message"修改为"[姓名]msssage"。')]),s._v(" "),a("p",[s._v("现在比较流行使用husky来做hook，husky可以让我们在package.json里配置git hooks，使git hooks的使用变得更简单方便。运行"),a("code",[s._v("npm install husky")]),s._v("，它会在我们项目根目录下面的.git/hooks文件夹下面创建pre-commit、pre-push等hooks，只需配置json即可：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n    ...\n    "husky": {\n        "hooks": {\n          "pre-commit": "npm test"\n        }\n      }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"【git常见问题】fatal-not-a-valid-object-name-master"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#【git常见问题】fatal-not-a-valid-object-name-master"}},[s._v("#")]),s._v(" 【git常见问题】fatal: Not a valid object name: 'master'.")]),s._v(" "),a("ul",[a("li",[s._v("问题现象：")])]),s._v(" "),a("ol",[a("li",[s._v("仓库使用"),a("code",[s._v("git init")]),s._v("，执行 git cat-file -t d9bce7058fdf7b9809c5a87053a5270c6a75ea指令报错：fatal: Not a valid object name: 'master'.")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ltr")]),s._v(" .git/objects/3b\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n-r--r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" admin "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("197121")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" Mar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":26 d9bce7058fdf7b9809c5a87053a5270c6a75ea\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" d9bce7058fdf7b9809c5a87053a5270c6a75ea\nfatal: Not a valid object name d9bce7058fdf7b9809c5a87053a5270c6a75ea\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("解决方式")])]),s._v(" "),a("p",[s._v("在hash值前需加入文件夹名称如3b")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" 3bd9bce7058fdf7b9809c5a87053a5270c6a75ea\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3333")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 3bd9bce7058fdf7b9809c5a87053a5270c6a75ea\nblob\n$  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cat-file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 3bd9bce7\nblob\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
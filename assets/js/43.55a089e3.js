(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{348:function(a,s,t){a.exports=t.p+"assets/img/2023-01-30-22-06-37.f4b878e4.png"},570:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"linux下链接顺序特殊要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux下链接顺序特殊要求"}},[a._v("#")]),a._v(" Linux下链接顺序特殊要求")]),a._v(" "),s("p",[s("img",{attrs:{src:t(348),alt:"2023-01-30-22-06-37.png"}})]),a._v(" "),s("ul",[s("li",[a._v("不正确链接会报：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("test.a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("test.o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": In "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("test':\ntest.c:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(".text+0x13"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": undefined reference to "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("func'\ncollect2: ld returned "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v(" status\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ul",[s("li",[s("p",[a._v("保证正确链接注意事项")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("顺序： 依赖其他库的库,被依赖库")]),a._v("\ntest.a 依赖于fun.a,  故顺序必须为 ：")])]),a._v(" "),s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[a._v("gcc "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("o main main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("o func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("a test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("a\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("Object文件需在链接前")])])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\nCFLAGS "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fPIC")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("DEFINES"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -I"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("INCDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -I"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("PUBINCDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -I"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("SQLPUBLIC"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -I"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("SMINCDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -I"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${MQMHOME}")]),a._v("/inc -Wno-deprecated\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LDFLAGS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" -L"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("ORACLE_HOME"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/lib "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lclntsh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lm")]),a._v(" -L"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("SMLIBDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lsm")]),a._v(" -L"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("PUBLIBDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lxnet")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lpthread")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lhance")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lsql")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-llang")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("CC"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("CFLAGS"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("BINDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$@")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("MYTESTOBJ"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" -L"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("LIBDIR"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lmypub")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("LDFLAGS"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("ul",[s("li",[a._v('在c++代码中链接c语言的库需加extern "C"的声明')])])])}),[],!1,null,null,null);s.default=r.exports}}]);
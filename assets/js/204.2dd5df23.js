(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{619:function(a,s,t){"use strict";t.r(s);var e=t(2),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"java-core-分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-core-分析"}},[a._v("#")]),a._v(" Java Core 分析")]),a._v(" "),s("h2",{attrs:{id:"素材"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#素材"}},[a._v("#")]),a._v(" 素材")]),a._v(" "),s("p",[a._v("was core宕后会出现java的core文件,请向运维或测试获取以下几类文件:\n"),s("img",{attrs:{src:"http://192.168.10.74:8082/chenyang/kf1_kb/raw/master/pic/2022054152831_20220504152830.png",alt:""}})]),a._v(" "),s("p",[a._v("各文件用途讲解如下：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("javacore.日期.时间*.txt:")]),a._v(" "),s("ul",[s("li",[a._v("关于cpu的，javacore文件是java进程的快照，主要保存的是Java应用各线程在某一时刻的运行的位置，即JVM执行到哪一个类、哪一个方法、哪一行上,也即threaddump文件")]),a._v(" "),s("li",[a._v("该文件是普通文本，可以打开查看")])])]),a._v(" "),s("li",[s("p",[a._v("headdump.日期.时间*.phd:")]),a._v(" "),s("ul",[s("li",[a._v("关于memory的，heapdump文件是指定时刻java堆栈的快照，是一个二进制镜像文件，它保存了某一时刻JVM堆中对象的使用情况")])])]),a._v(" "),s("li",[s("p",[a._v("snap.日期.时间*.trc:")]),a._v(" "),s("ul",[s("li",[a._v("snap文件是快速追踪的保留在跟踪缓冲区里的追踪点数据，用来分析本地内存的OOM异常")])])]),a._v(" "),s("li",[s("p",[a._v("core.日期.时间*.dmp: (特别大)")]),a._v(" "),s("ul",[s("li",[a._v("core文件是java宕掉生成的操作系统级别的进程二进制镜像文件,又叫核心转储,当程序运行过程中发生异常,程序异常退出时,由操作系统把程序当前的内存状况存储在一个core文件中")])])])]),a._v(" "),s("h2",{attrs:{id:"分析工具篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析工具篇"}},[a._v("#")]),a._v(" 分析工具篇")]),a._v(" "),s("h3",{attrs:{id:"mat-java-内存分析工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mat-java-内存分析工具"}},[a._v("#")]),a._v(" MAT java 内存分析工具")]),a._v(" "),s("blockquote",[s("p",[a._v("eclipse出品的内存分析工具(Memory Analyzer Tool), 分析 Java堆数据的专业工具，可以计算出内存中对象的实例数量、占用空间大小、引用关系等，看看是谁阻止了垃圾收集器的回收工作，从而定位内存泄漏的原因。")])]),a._v(" "),s("p",[a._v("可参考： "),s("a",{attrs:{href:"http://192.168.193.113:7707/#/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/core%E5%88%86%E6%9E%90/MAT_In_Action.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("MAT文件实战"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"ibm针对was的分析工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ibm针对was的分析工具"}},[a._v("#")]),a._v(" IBM针对was的分析工具")]),a._v(" "),s("h4",{attrs:{id:"jca-javacore-analyzer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jca-javacore-analyzer"}},[a._v("#")]),a._v(" jca (javacore Analyzer)")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("用途： java线程堆栈分析工具，主要用于分析死锁情况，线程调用使用情况，方法使用频率等")])]),a._v(" "),s("li",[s("p",[a._v("启动命令行:")])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx2048m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xms1024m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" jca467.jar\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("blockquote",[s("p",[a._v("注: jca467或者jca457均可,内存请视文件大小调整")])]),a._v(" "),s("ul",[s("li",[a._v("界面出现后,打开"),s("code",[a._v("javacore.日期.时间*.txt")]),a._v("文件,可查看到错误情况：\n"),s("img",{attrs:{src:"http://192.168.10.74:8082/chenyang/kf1_kb/raw/master/pic/2022054172750_20220504172750.png",alt:""}})])]),a._v(" "),s("blockquote",[s("p",[a._v("Dump Event 区分： systhrow(异常后系统抛出), user(当前用户), GPF (sgementFault，挂載.so，dll等可能导致段错误)")])]),a._v(" "),s("ul",[s("li",[a._v("另外，会详细列出环境变量,服务器配置等信息；")]),a._v(" "),s("li",[a._v("再往下在"),s("code",[a._v("Current Thread")]),a._v("会展示线程情况，主要关注Java Stack下自己的应用方法：\n"),s("img",{attrs:{src:"http://192.168.10.74:8082/chenyang/kf1_kb/raw/master/pic/202205417335_20220504173305.png",alt:""}})])]),a._v(" "),s("h4",{attrs:{id:"ga-java-gc-analyzer-todo-待补充完善"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ga-java-gc-analyzer-todo-待补充完善"}},[a._v("#")]),a._v(" ga (java gc Analyzer) - TODO：待补充完善")]),a._v(" "),s("ul",[s("li",[a._v("用途： 查看内存gc情况")]),a._v(" "),s("li",[a._v("启动命令：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx2048m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xms1024m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" ha457.jar\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h4",{attrs:{id:"ha-java-heap-analyzer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ha-java-heap-analyzer"}},[a._v("#")]),a._v(" ha (java Heap Analyzer)")]),a._v(" "),s("ul",[s("li",[a._v("用途： java线程堆栈分析工具，主要用于分析死锁情况，线程调用使用情况，方法使用频率等")]),a._v(" "),s("li",[a._v("启动命令：")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx2048m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xms1024m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" ha457.jar\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ul",[s("li",[a._v("界面出现后,打开"),s("code",[a._v("headdump.日期.时间*.phd")]),a._v("文件,很直观就能看到具体可能的内存泄露位置\n"),s("img",{attrs:{src:"http://192.168.10.74:8082/chenyang/kf1_kb/raw/master/pic/2022054175846_20220504175845.png",alt:"ha中内存泄露情况"}})])]),a._v(" "),s("h2",{attrs:{id:"ibm-util"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ibm-util"}},[a._v("#")]),a._v(" IBM util")]),a._v(" "),s("blockquote",[s("p",[a._v("参考 https://blog.csdn.net/happyqwz/article/details/8230868\n注意： 以下程序运行需jdk1.8")])]),a._v(" "),s("ul",[s("li",[a._v("jca457.jar：\n用于分析javacore文件(javacore.20210526.190330.4350.0009.txt)\n可以查看线程的状态，重点检查Blocked状态")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("jdk1.8.0_111"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("java "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx200m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" jca457.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("ha456.jar：\n用于分析heapdump文件（heapdump.20210526.190330.4350.0010.phd）\n可以查看内存使用情况,检查是否存在内存溢出或占用内存特别大的类")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("jdk1.8.0_111"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("java "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xms3096m")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx3096m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" ha456.jar \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"coredmp联机采集"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#coredmp联机采集"}},[a._v("#")]),a._v(" coredmp联机采集")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("jstack "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9716")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" thread_dump.txt \njmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dump:file")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("heap_dump.dmp "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9716")]),a._v(" \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);